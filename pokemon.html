<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏™‡∏°‡∏∏‡∏î‡∏†‡∏≤‡∏û‡πÇ‡∏õ‡πÄ‡∏Å‡∏°‡∏≠‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap');
        body { font-family: 'Kanit', sans-serif; background-color: #f3f4f6; }
        .pokemon-card { transition: transform 0.3s ease; }
        .pokemon-card:hover { transform: translateY(-5px); }
    </style>
</head>
<body class="p-4 md:p-10">

    <div class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8">
        
        <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÇ‡∏õ‡πÄ‡∏Å‡∏°‡∏≠‡∏ô -->
        <div class="bg-white p-6 rounded-3xl shadow-lg">
            <h2 class="text-2xl font-bold text-red-600 mb-6 flex items-center gap-2">
                üî¥ ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÇ‡∏õ‡πÄ‡∏Å‡∏°‡∏≠‡∏ô
            </h2>
            
            <div class="flex gap-2 mb-6">
                <input 
                    type="text" 
                    id="pokemonInput" 
                    placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏© (‡πÄ‡∏ä‡πà‡∏ô pikachu)"
                    class="flex-1 px-4 py-2 border-2 border-gray-100 rounded-xl focus:border-red-400 outline-none transition-all"
                >
                <button 
                    onclick="searchPokemon()"
                    class="bg-red-500 hover:bg-red-600 text-white px-6 py-2 rounded-xl font-bold transition-colors"
                >
                    ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
                </button>
            </div>

            <!-- ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ -->
            <div id="searchResult" class="min-h-[250px] flex flex-col items-center justify-center border-2 border-dashed border-gray-100 rounded-2xl p-4">
                <p class="text-gray-400">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏õ‡πÄ‡∏Å‡∏°‡∏≠‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏£‡∏ß‡∏à</p>
            </div>
        </div>

        <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡πÇ‡∏õ‡πÄ‡∏Å‡∏°‡∏≠‡∏ô (LocalStorage) -->
        <div class="bg-white p-6 rounded-3xl shadow-lg border-t-8 border-yellow-400">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2">
                üéí ‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô
            </h2>
            <ul id="favoritesList" class="space-y-2">
                <!-- ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏≤‡∏Å localStorage ‡∏à‡∏∞‡∏°‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
            </ul>
            <div id="emptyBagMsg" class="text-center py-10 text-gray-400 hidden">
                ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏õ‡πÄ‡∏Å‡∏°‡∏≠‡∏ô‡πÉ‡∏ô‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤
            </div>
            <button 
                onclick="clearBag()" 
                class="mt-6 w-full text-xs text-gray-400 hover:text-red-500 transition-colors"
            >
                ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
            </button>
        </div>

    </div>

    <script>
        const pokemonInput = document.getElementById('pokemonInput');
        const searchResult = document.getElementById('searchResult');
        const favoritesList = document.getElementById('favoritesList');
        const emptyBagMsg = document.getElementById('emptyBagMsg');

        // --- 1. ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÇ‡∏õ‡πÄ‡∏Å‡∏°‡∏≠‡∏ô‡∏à‡∏≤‡∏Å API ---
        async function searchPokemon() {
            const name = pokemonInput.value.toLowerCase().trim();
            if (!name) return;

            searchResult.innerHTML = `<p class="text-blue-500 animate-pulse">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...</p>`;

            try {
                const response = await fetch(`https://pokeapi.co/api/v2/pokemon/${name}`);
                
                if (!response.ok) throw new Error("‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÇ‡∏õ‡πÄ‡∏Å‡∏°‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤");

                const data = await response.json();
                renderSearchResult(data);
            } catch (err) {
                searchResult.innerHTML = `<p class="text-red-500 font-bold">‚ùå ${err.message}</p>`;
            }
        }

        // --- 2. ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡πÄ‡∏Å‡∏°‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏à‡∏≠ ---
        function renderSearchResult(pokemon) {
            searchResult.innerHTML = `
                <div class="text-center pokemon-card">
                    <img src="${pokemon.sprites.front_default}" alt="${pokemon.name}" class="w-32 h-32 mx-auto drop-shadow-md">
                    <h3 class="text-xl font-bold capitalize text-gray-800 mb-4">${pokemon.name}</h3>
                    <button 
                        onclick="saveToBag('${pokemon.name}')"
                        class="bg-yellow-400 hover:bg-yellow-500 text-yellow-900 font-bold py-2 px-8 rounded-full shadow-md transition-all"
                    >
                        ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤
                    </button>
                </div>
            `;
        }

        // --- 3. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á localStorage ---
        function saveToBag(name) {
            // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤ (‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏´‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á Array ‡πÄ‡∏õ‡∏•‡πà‡∏≤)
            let bag = JSON.parse(localStorage.getItem('myPokemonBag')) || [];
            
            // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ã‡πâ‡∏≥
            if (bag.includes(name)) {
                alert('‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡πÇ‡∏õ‡πÄ‡∏Å‡∏°‡∏≠‡∏ô‡∏ï‡∏±‡∏ß‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡πÅ‡∏•‡πâ‡∏ß!');
                return;
            }

            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà
            bag.push(name);
            
            // ‡πÄ‡∏ã‡∏ü‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏µ‡πà localStorage
            localStorage.setItem('myPokemonBag', JSON.stringify(bag));
            
            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
            loadFavorites();
        }

        // --- 4. ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å localStorage ‡∏°‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• ---
        function loadFavorites() {
            const bag = JSON.parse(localStorage.getItem('myPokemonBag')) || [];
            
            if (bag.length === 0) {
                favoritesList.innerHTML = "";
                emptyBagMsg.classList.remove('hidden');
                return;
            }

            emptyBagMsg.classList.add('hidden');
            favoritesList.innerHTML = bag.map((name, index) => `
                <li class="flex justify-between items-center bg-gray-50 p-3 rounded-xl border border-gray-100 group">
                    <span class="capitalize font-medium text-gray-700">#${index + 1} ${name}</span>
                    <button onclick="removeFromBag('${name}')" class="text-gray-300 hover:text-red-500 transition-colors">
                        ‡∏•‡∏ö
                    </button>
                </li>
            `).join('');
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏ö‡πÇ‡∏õ‡πÄ‡∏Å‡∏°‡∏≠‡∏ô‡∏ö‡∏≤‡∏á‡∏ï‡∏±‡∏ß
        function removeFromBag(name) {
            let bag = JSON.parse(localStorage.getItem('myPokemonBag')) || [];
            bag = bag.filter(item => item !== name);
            localStorage.setItem('myPokemonBag', JSON.stringify(bag));
            loadFavorites();
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤
        function clearBag() {
            if(confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                localStorage.removeItem('myPokemonBag');
                loadFavorites();
            }
        }

        // ‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ß‡πá‡∏ö
        window.onload = loadFavorites;

        // ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Å‡∏î Enter ‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
        pokemonInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') searchPokemon();
        });
    </script>
</body>
</html>